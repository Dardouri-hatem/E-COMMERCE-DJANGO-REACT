{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dardo\\\\Desktop\\\\e-commerce\\\\frontend\\\\src\\\\components\\\\Products\\\\checkoutForm.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Elements, CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { Button } from \"react-bootstrap\";\n\nconst CheckoutForm = ({\n  success,\n  user\n}) => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardElement)\n    });\n\n    if (!error) {\n      const user_id = user.id;\n\n      try {\n        const config = {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `JWT ${localStorage.getItem(\"access\")}`,\n            Accept: \"application/json\"\n          }\n        };\n        const {\n          data\n        } = await axios.post(`http://127.0.0.1:8000/products/checkout/`, {\n          payment_method_id: paymentMethod.id,\n          user_id\n        }, config);\n        console.log(data);\n        success();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"mt-3 mr-5\",\n    onSubmit: handleSubmit,\n    style: {\n      width: \"50%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Would you complete your purchase ?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"submit\",\n      disabled: !stripe,\n      style: {\n        width: \"100%\"\n      },\n      children: \"Pay\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 7\n  }, this);\n};\n\n_s(CheckoutForm, \"EKvoGMX7lxsZ5SGPpYu2aKFzClQ=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c = CheckoutForm;\n\nconst mapSTP = state => ({\n  user: state.account.user,\n  cart: state.product.cart\n});\n\nconnect(mapSTP)(CheckoutForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"sources":["C:/Users/dardo/Desktop/e-commerce/frontend/src/components/Products/checkoutForm.js"],"names":["React","Elements","CardElement","useStripe","useElements","Button","CheckoutForm","success","user","stripe","elements","handleSubmit","event","preventDefault","error","paymentMethod","createPaymentMethod","type","card","getElement","user_id","id","config","headers","Authorization","localStorage","getItem","Accept","data","axios","post","payment_method_id","console","log","width","mapSTP","state","account","cart","product","connect"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACIC,QADJ,EAEIC,WAFJ,EAGIC,SAHJ,EAIIC,WAJJ,QAKS,yBALT;AAME,SAASC,MAAT,QAAuB,iBAAvB;;AAEF,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAD,KAAuB;AAAA;;AACxC,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAMO,QAAQ,GAAGN,WAAW,EAA5B;;AAEA,QAAMO,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpCA,IAAAA,KAAK,CAACC,cAAN;AAEA,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAA2B,MAAMN,MAAM,CAACO,mBAAP,CAA2B;AAChEC,MAAAA,IAAI,EAAE,MAD0D;AAEhEC,MAAAA,IAAI,EAAER,QAAQ,CAACS,UAAT,CAAoBjB,WAApB;AAF0D,KAA3B,CAAvC;;AAKA,QAAI,CAACY,KAAL,EAAY;AACV,YAAMM,OAAO,GAAGZ,IAAI,CAACa,EAArB;;AACA,UAAI;AACF,cAAMC,MAAM,GAAG;AACbC,UAAAA,OAAO,EAAE;AACP,4BAAgB,kBADT;AAEPC,YAAAA,aAAa,EAAG,OAAMC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+B,EAF9C;AAGPC,YAAAA,MAAM,EAAE;AAHD;AADI,SAAf;AAOA,cAAM;AAAEC,UAAAA;AAAF,YAAW,MAAMC,KAAK,CAACC,IAAN,CACpB,0CADoB,EAErB;AAAEC,UAAAA,iBAAiB,EAAEhB,aAAa,CAACM,EAAnC;AAAuCD,UAAAA;AAAvC,SAFqB,EAGrBE,MAHqB,CAAvB;AAKAU,QAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACArB,QAAAA,OAAO;AACR,OAfD,CAeE,OAAOO,KAAP,EAAc;AACdkB,QAAAA,OAAO,CAACC,GAAR,CAAYnB,KAAZ;AACD;AACF;AACF,GA7BD;;AA+BA,sBACE;AACE,IAAA,SAAS,EAAC,WADZ;AAEE,IAAA,QAAQ,EAAEH,YAFZ;AAGE,IAAA,KAAK,EAAE;AAAEuB,MAAAA,KAAK,EAAE;AAAT,KAHT;AAAA,4BAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALF,eAME,QAAC,WAAD;AAAA;AAAA;AAAA;AAAA,YANF,eAOE,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,QAAQ,EAAE,CAACzB,MAAjC;AAAyC,MAAA,KAAK,EAAE;AAAEyB,QAAAA,KAAK,EAAE;AAAT,OAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CAhDH;;GAAM5B,Y;UACaH,S,EACEC,W;;;KAFfE,Y;;AAiDJ,MAAM6B,MAAM,GAAIC,KAAD,KAAY;AACzB5B,EAAAA,IAAI,EAAE4B,KAAK,CAACC,OAAN,CAAc7B,IADK;AAEzB8B,EAAAA,IAAI,EAAEF,KAAK,CAACG,OAAN,CAAcD;AAFK,CAAZ,CAAf;;AAIAE,OAAO,CAACL,MAAD,CAAP,CAAgB7B,YAAhB","sourcesContent":["import React from \"react\";\r\nimport {\r\n    Elements,\r\n    CardElement,\r\n    useStripe,\r\n    useElements,\r\n  } from \"@stripe/react-stripe-js\";\r\n  import { Button } from \"react-bootstrap\";\r\n\r\nconst CheckoutForm = ({ success, user }) => {\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n  \r\n    const handleSubmit = async (event) => {\r\n      event.preventDefault();\r\n  \r\n      const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n        type: \"card\",\r\n        card: elements.getElement(CardElement),\r\n      });\r\n  \r\n      if (!error) {\r\n        const user_id = user.id;\r\n        try {\r\n          const config = {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: `JWT ${localStorage.getItem(\"access\")}`,\r\n              Accept: \"application/json\",\r\n            },\r\n          };\r\n          const { data } = await axios.post(\r\n            `http://127.0.0.1:8000/products/checkout/`,\r\n            { payment_method_id: paymentMethod.id, user_id },\r\n            config\r\n          );\r\n          console.log(data);\r\n          success();\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    };\r\n  \r\n    return (\r\n      <form\r\n        className=\"mt-3 mr-5\"\r\n        onSubmit={handleSubmit}\r\n        style={{ width: \"50%\" }}\r\n      >\r\n        <h3>Would you complete your purchase ?</h3>\r\n        <CardElement />\r\n        <Button type=\"submit\" disabled={!stripe} style={{ width: \"100%\" }}>\r\n          Pay\r\n        </Button>\r\n      </form>\r\n    );\r\n  };\r\n  const mapSTP = (state) => ({\r\n    user: state.account.user,\r\n    cart: state.product.cart,\r\n  });\r\n  connect(mapSTP)(CheckoutForm);\r\n  "]},"metadata":{},"sourceType":"module"}