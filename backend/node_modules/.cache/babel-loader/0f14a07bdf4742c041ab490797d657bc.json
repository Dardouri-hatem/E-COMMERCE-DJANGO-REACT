{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{SIGNUP_SUCCESS,ACTIVATION_SUCCESS,ACTIVATION_FAIL,RESET_PASSWORD_SUCCESS,RESET_PASSWORD_FAIL,RESET_PASSWORD_CONFIRM_SUCCESS,RESET_PASSWORD_CONFIRM_FAIL,LOGOUT,LOGIN_SUCCESS}from'../constants';import{returnErrors,clearErrors}from\"./errors\";// REGISTER A NEW USER \nexport var sign_up=function sign_up(_ref){var name=_ref.name,email=_ref.email,password=_ref.password,re_password=_ref.re_password;return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({name:name,email:email,password:password,re_password:re_password});_context.prev=2;_context.next=5;return axios.post(\"http://127.0.0.1:8000/auth/users/\",body,config);case 5:res=_context.sent;dispatch({type:SIGNUP_SUCCESS,payload:res.data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch(returnErrors({msg:_context.t0.response.data,status:_context.t0.response.status,id:\"SIGNUP_FAIL\"}));case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref2.apply(this,arguments);};}();};// VERIFY WITH AN EMAIL SENT TO USER'S EMAIL \nexport var verify=function verify(uid,token){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token});_context2.prev=2;_context2.next=5;return axios.post(\"http://127.0.0.1:8000/auth/users/activation/\",body,config);case 5:res=_context2.sent;dispatch({type:ACTIVATION_SUCCESS,payload:res.data});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:ACTIVATION_FAIL});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};// LOGIN A USER \nexport var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email,password:password});_context3.prev=2;_context3.next=5;return axios.post(\"http://127.0.0.1:8000/auth/jwt/create/\",body,config);case 5:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(load_user());_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);dispatch(returnErrors({msg:error.response.data,status:error.response.status,id:\"LOGIN_FAIL\"}));case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};// FORGET PASSWORD ----> SENT AN EMAIL TO CONFIRM\nexport var reset_password=function reset_password(email){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email});_context4.prev=2;_context4.next=5;return axios.post(\"http://127.0.0.1:8000/auth/users/reset_password/\",body,config);case 5:res=_context4.sent;dispatch({type:RESET_PASSWORD_SUCCESS,payload:res.data});_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);dispatch({type:RESET_PASSWORD_FAIL});case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[2,9]]);}));return function(_x4){return _ref5.apply(this,arguments);};}();};// RESET A NEW PASSWORD WITH LIEN SENT IN EMAIL\nexport var reset_password_confirm=function reset_password_confirm(uid,token,new_password,re_new_password){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token,new_password:new_password,re_new_password:re_new_password});_context5.prev=2;_context5.next=5;return axios.post(\"http://127.0.0.1:8000/auth/users/reset_password_confirm/\",body,config);case 5:res=_context5.sent;dispatch({type:RESET_PASSWORD_CONFIRM_SUCCESS,payload:res.data});_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](2);dispatch({type:RESET_PASSWORD_CONFIRM_FAIL});case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[2,9]]);}));return function(_x5){return _ref6.apply(this,arguments);};}();};// LOGOUT\nexport var logout=function logout(){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:LOGOUT});case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/dardo/Desktop/e-commerce/frontend/src/JS/actions/account.js"],"names":["axios","SIGNUP_SUCCESS","ACTIVATION_SUCCESS","ACTIVATION_FAIL","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAIL","RESET_PASSWORD_CONFIRM_SUCCESS","RESET_PASSWORD_CONFIRM_FAIL","LOGOUT","LOGIN_SUCCESS","returnErrors","clearErrors","sign_up","name","email","password","re_password","dispatch","config","headers","body","JSON","stringify","post","res","type","payload","data","msg","response","status","id","verify","uid","token","login","load_user","error","reset_password","reset_password_confirm","new_password","re_new_password","logout"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nimport {SIGNUP_SUCCESS,\r\n    ACTIVATION_SUCCESS,\r\n    ACTIVATION_FAIL,\r\n    RESET_PASSWORD_SUCCESS,\r\n    RESET_PASSWORD_FAIL,\r\n    RESET_PASSWORD_CONFIRM_SUCCESS,\r\n    RESET_PASSWORD_CONFIRM_FAIL,\r\n    LOGOUT,\r\n    LOGIN_SUCCESS} from '../constants'\r\n\r\nimport { returnErrors, clearErrors } from \"./errors\";\r\n\r\n\r\n// REGISTER A NEW USER \r\nexport const sign_up = ({name,email,password,re_password})=>async (dispatch)=>{\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n    const body = JSON.stringify({ name, email, password, re_password }); \r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/`, body, config);\r\n\r\n        dispatch({\r\n            type: SIGNUP_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (error) {\r\n        dispatch(\r\n            returnErrors({\r\n              msg: error.response.data,\r\n              status: error.response.status,\r\n              id: \"SIGNUP_FAIL\",\r\n            })\r\n          );\r\n    }\r\n}\r\n\r\n// VERIFY WITH AN EMAIL SENT TO USER'S EMAIL \r\nexport const verify = (uid, token) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ uid, token }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/activation/`, body, config);\r\n\r\n        dispatch({\r\n            type: ACTIVATION_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: ACTIVATION_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\n// LOGIN A USER \r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ email, password });\r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/jwt/create/`, body, config);\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res.data\r\n        });\r\n\r\n        dispatch(load_user());\r\n    } catch (err) {\r\n        dispatch(\r\n            returnErrors({\r\n              msg: error.response.data,\r\n              status: error.response.status,\r\n              id: \"LOGIN_FAIL\",\r\n            })\r\n          );\r\n    }\r\n};\r\n\r\n// FORGET PASSWORD ----> SENT AN EMAIL TO CONFIRM\r\nexport const reset_password = (email) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ email }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password/`, body, config);\r\n\r\n        dispatch({\r\n            type: RESET_PASSWORD_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\n// RESET A NEW PASSWORD WITH LIEN SENT IN EMAIL\r\nexport const reset_password_confirm = (uid, token, new_password, re_new_password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ uid, token, new_password, re_new_password }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password_confirm/`, body, config);\r\n\r\n        dispatch({\r\n            type: RESET_PASSWORD_CONFIRM_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_CONFIRM_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n// LOGOUT\r\nexport const logout = () => async (dispatch) => {\r\n    dispatch({ type: LOGOUT });\r\n}"]},"metadata":{},"sourceType":"module"}