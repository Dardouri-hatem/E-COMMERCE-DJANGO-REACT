{"ast":null,"code":"import axios from 'axios';\nimport { SIGNUP_SUCCESS, ACTIVATION_SUCCESS, ACTIVATION_FAIL, RESET_PASSWORD_SUCCESS, RESET_PASSWORD_FAIL, RESET_PASSWORD_CONFIRM_SUCCESS, RESET_PASSWORD_CONFIRM_FAIL, LOGOUT, LOGIN_SUCCESS } from '../constants';\nimport { returnErrors, clearErrors } from \"./errors\"; // REGISTER A NEW USER \n\nexport const sign_up = ({\n  name,\n  email,\n  password,\n  re_password\n}) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    name,\n    email,\n    password,\n    re_password\n  });\n\n  try {\n    const res = await axios.post(`http://127.0.0.1:8000/auth/users/`, body, config);\n    dispatch({\n      type: SIGNUP_SUCCESS,\n      payload: res.data\n    });\n  } catch (error) {\n    dispatch(returnErrors({\n      msg: error.response.data,\n      status: error.response.status,\n      id: \"SIGNUP_FAIL\"\n    }));\n  }\n}; // VERIFY WITH AN EMAIL SENT TO USER'S EMAIL \n\nexport const verify = (uid, token) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    uid,\n    token\n  });\n\n  try {\n    const res = await axios.post(`http://127.0.0.1:8000/auth/users/activation/`, body, config);\n    dispatch({\n      type: ACTIVATION_SUCCESS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: ACTIVATION_FAIL\n    });\n  }\n}; // LOGIN A USER \n\nexport const login = (email, password) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    email,\n    password\n  });\n\n  try {\n    const res = await axios.post(`http://127.0.0.1:8000/auth/jwt/create/`, body, config);\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n    dispatch(load_user());\n  } catch (error) {\n    dispatch(returnErrors({\n      msg: error.response.data,\n      status: error.response.status,\n      id: \"LOGIN_FAIL\"\n    }));\n  }\n}; // LOAD A USER \n\nexport const load_user = () => async dispatch => {\n  if (localStorage.getItem('access')) {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `JWT ${localStorage.getItem('access')}`,\n        'Accept': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.get(`http://127.0.0.1:8000/auth/users/me/`, config);\n      dispatch({\n        type: USER_LOADED_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: USER_LOADED_FAIL\n      });\n    }\n  } else {\n    dispatch({\n      type: USER_LOADED_FAIL\n    });\n  }\n}; // FORGET PASSWORD ----> SENT AN EMAIL TO CONFIRM\n\nexport const reset_password = email => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    email\n  });\n\n  try {\n    const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password/`, body, config);\n    dispatch({\n      type: RESET_PASSWORD_SUCCESS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: RESET_PASSWORD_FAIL\n    });\n  }\n}; // RESET A NEW PASSWORD WITH LIEN SENT IN EMAIL\n\nexport const reset_password_confirm = (uid, token, new_password, re_new_password) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    uid,\n    token,\n    new_password,\n    re_new_password\n  });\n\n  try {\n    const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password_confirm/`, body, config);\n    dispatch({\n      type: RESET_PASSWORD_CONFIRM_SUCCESS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: RESET_PASSWORD_CONFIRM_FAIL\n    });\n  }\n}; // LOGOUT\n\nexport const logout = () => async dispatch => {\n  dispatch({\n    type: LOGOUT\n  });\n};","map":{"version":3,"sources":["C:/Users/dardo/Desktop/e-commerce/frontend/src/JS/actions/account.js"],"names":["axios","SIGNUP_SUCCESS","ACTIVATION_SUCCESS","ACTIVATION_FAIL","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAIL","RESET_PASSWORD_CONFIRM_SUCCESS","RESET_PASSWORD_CONFIRM_FAIL","LOGOUT","LOGIN_SUCCESS","returnErrors","clearErrors","sign_up","name","email","password","re_password","dispatch","config","headers","body","JSON","stringify","res","post","type","payload","data","error","msg","response","status","id","verify","uid","token","err","login","load_user","localStorage","getItem","get","USER_LOADED_SUCCESS","USER_LOADED_FAIL","reset_password","reset_password_confirm","new_password","re_new_password","logout"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\n\r\nimport {SIGNUP_SUCCESS,\r\n    ACTIVATION_SUCCESS,\r\n    ACTIVATION_FAIL,\r\n    RESET_PASSWORD_SUCCESS,\r\n    RESET_PASSWORD_FAIL,\r\n    RESET_PASSWORD_CONFIRM_SUCCESS,\r\n    RESET_PASSWORD_CONFIRM_FAIL,\r\n    LOGOUT,\r\n    LOGIN_SUCCESS,\r\n} from '../constants'\r\n\r\nimport { returnErrors, clearErrors } from \"./errors\";\r\n\r\n\r\n// REGISTER A NEW USER \r\nexport const sign_up = ({name,email,password,re_password})=>async (dispatch)=>{\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n    const body = JSON.stringify({ name, email, password, re_password }); \r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/`, body, config);\r\n\r\n        dispatch({\r\n            type: SIGNUP_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (error) {\r\n        dispatch(\r\n            returnErrors({\r\n              msg: error.response.data,\r\n              status: error.response.status,\r\n              id: \"SIGNUP_FAIL\",\r\n            })\r\n          );\r\n    }\r\n}\r\n\r\n// VERIFY WITH AN EMAIL SENT TO USER'S EMAIL \r\nexport const verify = (uid, token) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ uid, token }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/activation/`, body, config);\r\n\r\n        dispatch({\r\n            type: ACTIVATION_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: ACTIVATION_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\n// LOGIN A USER \r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ email, password });\r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/jwt/create/`, body, config);\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: res.data\r\n        });\r\n\r\n        dispatch(load_user());\r\n    } catch (error) {\r\n        dispatch(\r\n            returnErrors({\r\n              msg: error.response.data,\r\n              status: error.response.status,\r\n              id: \"LOGIN_FAIL\",\r\n            })\r\n          );\r\n    }\r\n};\r\n\r\n\r\n// LOAD A USER \r\nexport const load_user = () => async dispatch => {\r\n    if (localStorage.getItem('access')) {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\r\n                'Accept': 'application/json'\r\n            }\r\n        };\r\n\r\n        try {\r\n            const res = await axios.get(`http://127.0.0.1:8000/auth/users/me/`, config);\r\n\r\n            dispatch({\r\n                type: USER_LOADED_SUCCESS,\r\n                payload: res.data\r\n            });\r\n        } catch (err) {\r\n            dispatch({\r\n                type: USER_LOADED_FAIL\r\n            });\r\n        }\r\n    } else {\r\n        dispatch({\r\n            type: USER_LOADED_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n// FORGET PASSWORD ----> SENT AN EMAIL TO CONFIRM\r\nexport const reset_password = (email) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ email }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password/`, body, config);\r\n\r\n        dispatch({\r\n            type: RESET_PASSWORD_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\n// RESET A NEW PASSWORD WITH LIEN SENT IN EMAIL\r\nexport const reset_password_confirm = (uid, token, new_password, re_new_password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ uid, token, new_password, re_new_password }); \r\n\r\n    try {\r\n        const res = await axios.post(`http://127.0.0.1:8000/auth/users/reset_password_confirm/`, body, config);\r\n\r\n        dispatch({\r\n            type: RESET_PASSWORD_CONFIRM_SUCCESS,\r\n            payload: res.data\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: RESET_PASSWORD_CONFIRM_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n// LOGOUT\r\nexport const logout = () => async (dispatch) => {\r\n    dispatch({ type: LOGOUT });\r\n}"]},"metadata":{},"sourceType":"module"}