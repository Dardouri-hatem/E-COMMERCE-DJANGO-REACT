{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dardo\\\\Desktop\\\\e-commerce\\\\frontend\\\\src\\\\components\\\\Products\\\\ProductList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport axios from \"axios\";\nimport Card from \"./Card\";\nimport Pagination from \"../layout/Pagination\";\nimport Spinner from \"../layout/spinner\";\nimport \"./card.css\";\nimport { connect } from \"react-redux\";\nimport { fetchCart } from \"../../JS/actions/product\";\n\nconst Listings = ({\n  fetchCart,\n  user\n}) => {\n  _s();\n\n  const [listings, setListings] = useState([]);\n  const [count, setCount] = useState(0);\n  const [previous, setPrevious] = useState(\"\");\n  const [next, setNext] = useState(\"\");\n  const [active, setActive] = useState(1);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    setLoading(true);\n    fetchCart(user.id);\n\n    const fetchData = async () => {\n      try {\n        const res = await axios.get(`http://127.0.0.1:8000/products/?page=1`);\n        setListings(res.data.results);\n        setCount(res.data.count);\n        setPrevious(res.data.previous);\n        setNext(res.data.next);\n        setLoading(false);\n      } catch (err) {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []); // const displayListings = () => {\n  //   let display = [];\n  //   let result = [];\n  //   listings.map((listing) => {\n  //     return display.push(\n  //       <Card\n  //         title={listing.title}\n  //         category={listing.category}\n  //         price={listing.price}\n  //         discount_price={listing.discount_price}\n  //         description={listing.description}\n  //         photo_main={listing.photo_main}\n  //         id={listing.id}\n  //       />\n  //     );\n  //   });\n  //   for (let i = 0; i < listings.length; i += 3) {\n  //     result.push(\n  //       <div key={i} className=\"row\">\n  //         <div className=\"col-1-of-3\">{display[i]}</div>\n  //         <div className=\"col-1-of-3\">\n  //           {display[i + 1] ? display[i + 1] : null}\n  //         </div>\n  //         <div className=\"col-1-of-3\">\n  //           {display[i + 2] ? display[i + 2] : null}\n  //         </div>\n  //       </div>\n  //     );\n  //   }\n  //   return result;\n  // };\n\n  const visitPage = page => {\n    axios.get(`http://127.0.0.1:8000/products/?page=${page}`).then(res => {\n      setListings(res.data.results);\n      setPrevious(res.data.previous);\n      setNext(res.data.next);\n      setActive(page);\n    }).catch(err => {});\n  };\n\n  const previous_number = () => {\n    axios.get(previous).then(res => {\n      setListings(res.data.results);\n      setPrevious(res.data.previous);\n      setNext(res.data.next);\n      if (previous) setActive(active - 1);\n    }).catch(err => {});\n  };\n\n  const next_number = () => {\n    axios.get(next).then(res => {\n      setListings(res.data.results);\n      setPrevious(res.data.previous);\n      setNext(res.data.next);\n      if (next) setActive(active + 1);\n    }).catch(err => {});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"listings\",\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: \"Products Lists - Listings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"description\",\n          content: \"Listings page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listings__listings\",\n        children: listings.map(listing => /*#__PURE__*/_jsxDEV(Card, {\n          title: listing.title,\n          category: listing.category,\n          price: listing.price,\n          discount_price: listing.discount_price,\n          description: listing.description,\n          photo_main: listing.photo_main,\n          id: listing.id\n        }, listing.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"listings__pagination\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(Pagination, {\n            itemsPerPage: 3,\n            count: count,\n            visitPage: visitPage,\n            previous: previous_number,\n            next: next_number,\n            active: active,\n            setActive: setActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Listings, \"TxtTxsyxabxGT/MeR2Blh8AHZPE=\");\n\n_c = Listings;\n\nconst mapStateToProps = state => ({\n  user: state.account.user\n});\n\nexport default connect(mapStateToProps, {\n  fetchCart\n})(Listings);\n\nvar _c;\n\n$RefreshReg$(_c, \"Listings\");","map":{"version":3,"sources":["C:/Users/dardo/Desktop/e-commerce/frontend/src/components/Products/ProductList.js"],"names":["React","useState","useEffect","Helmet","axios","Card","Pagination","Spinner","connect","fetchCart","Listings","user","listings","setListings","count","setCount","previous","setPrevious","next","setNext","active","setActive","loading","setLoading","window","scrollTo","id","fetchData","res","get","data","results","err","visitPage","page","then","catch","previous_number","next_number","map","listing","title","category","price","discount_price","description","photo_main","mapStateToProps","state","account"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport axios from \"axios\";\r\nimport Card from \"./Card\";\r\nimport Pagination from \"../layout/Pagination\";\r\nimport Spinner from \"../layout/spinner\";\r\nimport \"./card.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchCart } from \"../../JS/actions/product\";\r\n\r\nconst Listings = ({ fetchCart, user }) => {\r\n  const [listings, setListings] = useState([]);\r\n  const [count, setCount] = useState(0);\r\n  const [previous, setPrevious] = useState(\"\");\r\n  const [next, setNext] = useState(\"\");\r\n  const [active, setActive] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    setLoading(true);\r\n    fetchCart(user.id);\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(`http://127.0.0.1:8000/products/?page=1`);\r\n\r\n        setListings(res.data.results);\r\n        setCount(res.data.count);\r\n        setPrevious(res.data.previous);\r\n        setNext(res.data.next);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  // const displayListings = () => {\r\n  //   let display = [];\r\n  //   let result = [];\r\n  //   listings.map((listing) => {\r\n  //     return display.push(\r\n  //       <Card\r\n  //         title={listing.title}\r\n  //         category={listing.category}\r\n  //         price={listing.price}\r\n  //         discount_price={listing.discount_price}\r\n  //         description={listing.description}\r\n  //         photo_main={listing.photo_main}\r\n  //         id={listing.id}\r\n  //       />\r\n  //     );\r\n  //   });\r\n\r\n  //   for (let i = 0; i < listings.length; i += 3) {\r\n  //     result.push(\r\n  //       <div key={i} className=\"row\">\r\n  //         <div className=\"col-1-of-3\">{display[i]}</div>\r\n  //         <div className=\"col-1-of-3\">\r\n  //           {display[i + 1] ? display[i + 1] : null}\r\n  //         </div>\r\n  //         <div className=\"col-1-of-3\">\r\n  //           {display[i + 2] ? display[i + 2] : null}\r\n  //         </div>\r\n  //       </div>\r\n  //     );\r\n  //   }\r\n\r\n  //   return result;\r\n  // };\r\n\r\n  const visitPage = (page) => {\r\n    axios\r\n      .get(`http://127.0.0.1:8000/products/?page=${page}`)\r\n      .then((res) => {\r\n        setListings(res.data.results);\r\n        setPrevious(res.data.previous);\r\n        setNext(res.data.next);\r\n        setActive(page);\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n\r\n  const previous_number = () => {\r\n    axios\r\n      .get(previous)\r\n      .then((res) => {\r\n        setListings(res.data.results);\r\n        setPrevious(res.data.previous);\r\n        setNext(res.data.next);\r\n        if (previous) setActive(active - 1);\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n\r\n  const next_number = () => {\r\n    axios\r\n      .get(next)\r\n      .then((res) => {\r\n        setListings(res.data.results);\r\n        setPrevious(res.data.previous);\r\n        setNext(res.data.next);\r\n        if (next) setActive(active + 1);\r\n      })\r\n      .catch((err) => {});\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {loading ? (\r\n        <Spinner />\r\n      ) : (\r\n        <main className=\"listings\">\r\n          <Helmet>\r\n            <title>Products Lists - Listings</title>\r\n            <meta name=\"description\" content=\"Listings page\" />\r\n          </Helmet>\r\n          <div className=\"listings__listings\">\r\n            {listings.map((listing) => (\r\n              <Card\r\n                key={listing.id}\r\n                title={listing.title}\r\n                category={listing.category}\r\n                price={listing.price}\r\n                discount_price={listing.discount_price}\r\n                description={listing.description}\r\n                photo_main={listing.photo_main}\r\n                id={listing.id}\r\n              />\r\n            ))}\r\n          </div>\r\n          <section className=\"listings__pagination\">\r\n            <div className=\"row\">\r\n              <Pagination\r\n                itemsPerPage={3}\r\n                count={count}\r\n                visitPage={visitPage}\r\n                previous={previous_number}\r\n                next={next_number}\r\n                active={active}\r\n                setActive={setActive}\r\n              />\r\n            </div>\r\n          </section>\r\n        </main>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state.account.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, { fetchCart })(Listings);\r\n"]},"metadata":{},"sourceType":"module"}