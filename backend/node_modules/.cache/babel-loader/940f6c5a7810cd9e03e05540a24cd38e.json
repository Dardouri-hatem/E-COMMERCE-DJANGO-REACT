{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/dardo/Desktop/e-commerce/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{Link,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{logout,checkAuthenticated,load_user}from\"../../JS/actions/account\";import{fetchCart}from\"../../JS/actions/product\";export var Header=/*#__PURE__*/function(_Component){_inherits(Header,_Component);var _super=_createSuper(Header);function Header(){var _this;_classCallCheck(this,Header);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.componentDidMount=function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _this.props.checkAuthenticated();case 3:_context.next=5;return _this.props.load_user();case 5:_context.next=7;return _this.props.fetchCart(_this.props.account.user.id);case 7:_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();};return _this;}_createClass(Header,[{key:\"render\",value:function render(){var _this$props$account=this.props.account,access=_this$props$account.access,user=_this$props$account.user;var cart=this.props.cart;var authLinks=/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav ml-auto mt-2 mt-lg-0\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item item-cart\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"nav-link waves-effect item-cart\",children:cart?cart.order_items.length!==0&&/*#__PURE__*/_jsx(\"span\",{className:\"badge\",children:cart.order_items.length}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown \",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary dropdown-toggle bg-transparent border-0 btn_cart mr-2\",type:\"button\",id:\"dropdownMenuButton\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-shopping-cart mr-1\",\"aria-hidden\":\"true\"}),\" \",\"Cart\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"dropdownMenuButton\",children:[cart?cart.order_items.length!==0&&cart.order_items.map(function(item){return/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",children:[item.quantity,\" x \",item.item.title]},item.id);}):null,cart?cart.order_items.length==0&&/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",children:\"No item in your cart\"}):null,/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-divider\"}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"/order_summary\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-right mr-1\",\"aria-hidden\":\"true\"}),\"Checkout\"]})]})]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"navbar-text mr-3\",children:/*#__PURE__*/_jsx(\"strong\",{children:user?\"Welcome \".concat(user.name):\"\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"button\",{onClick:this.props.logout,className:\"nav-link btn btn-info btn-sm text-light\",children:\"Logout\"})})]});var guestLinks=/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav ml-auto mt-2 mt-lg-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-link\",children:\"Register\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-link\",children:\"Login\"})})]});return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand-sm navbar-dark bg-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarTogglerDemo01\",\"aria-controls\":\"navbarTogglerDemo01\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarTogglerDemo01\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"navbar-brand\",href:\"#\",children:\"Store App\"}),/*#__PURE__*/_jsx(Link,{className:\"nav-link-to\",to:\"/\",children:\"Home\"})]}),access?authLinks:guestLinks]})});}}]);return Header;}(Component);var mapStateToProps=function mapStateToProps(state){return{account:state.account,cart:state.product.cart};};export default connect(mapStateToProps,{logout:logout,checkAuthenticated:checkAuthenticated,load_user:load_user,fetchCart:fetchCart})(Header);","map":{"version":3,"sources":["C:/Users/dardo/Desktop/e-commerce/frontend/src/components/layout/Header.js"],"names":["React","Component","Link","Redirect","connect","logout","checkAuthenticated","load_user","fetchCart","Header","componentDidMount","fetchData","props","account","user","id","access","cart","authLinks","order_items","length","map","item","quantity","title","name","guestLinks","mapStateToProps","state","product"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  logout,\n  checkAuthenticated,\n  load_user,\n} from \"../../JS/actions/account\";\nimport { fetchCart } from \"../../JS/actions/product\";\n\nexport class Header extends Component {\n  componentDidMount = () => {\n    const fetchData = async () => {\n      try {\n        await this.props.checkAuthenticated();\n        await this.props.load_user();\n        await this.props.fetchCart(this.props.account.user.id);\n      } catch (err) {}\n    };\n\n    fetchData();\n  };\n\n  render() {\n    const { access, user } = this.props.account;\n    const { cart } = this.props;\n\n    const authLinks = (\n      <ul className=\"navbar-nav ml-auto mt-2 mt-lg-0\">\n        <li className=\"nav-item item-cart\">\n          <a className=\"nav-link waves-effect item-cart\">\n            {cart\n              ? cart.order_items.length !== 0 && (\n                  <span className=\"badge\">{cart.order_items.length}</span>\n                )\n              : null}\n          </a>\n          <div className=\"dropdown \">\n            <button\n              className=\"btn btn-secondary dropdown-toggle bg-transparent border-0 btn_cart mr-2\"\n              type=\"button\"\n              id=\"dropdownMenuButton\"\n              data-toggle=\"dropdown\"\n              aria-haspopup=\"true\"\n              aria-expanded=\"false\"\n            >\n              <i className=\"fa fa-shopping-cart mr-1\" aria-hidden=\"true\"></i>{\" \"}\n              Cart\n            </button>\n            <div className=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\n              {cart\n                ? cart.order_items.length !== 0 &&\n                  cart.order_items.map((item) => (\n                    <a className=\"dropdown-item\" key={item.id}>\n                      {item.quantity} x {item.item.title}\n                    </a>\n                  ))\n                : null}\n              {cart\n                ? cart.order_items.length == 0 && (\n                    <a className=\"dropdown-item\">No item in your cart</a>\n                  )\n                : null}\n\n              <div className=\"dropdown-divider\"></div>\n              <a className=\"dropdown-item\" href=\"/order_summary\">\n                <i className=\"fa fa-arrow-right mr-1\" aria-hidden=\"true\"></i>\n                Checkout\n              </a>\n            </div>\n          </div>\n        </li>\n        <span className=\"navbar-text mr-3\">\n          <strong>{user ? `Welcome ${user.name}` : \"\"}</strong>\n        </span>\n        <li className=\"nav-item\">\n          <button\n            onClick={this.props.logout}\n            className=\"nav-link btn btn-info btn-sm text-light\"\n          >\n            Logout\n          </button>\n        </li>\n      </ul>\n    );\n\n    const guestLinks = (\n      <ul className=\"navbar-nav ml-auto mt-2 mt-lg-0\">\n        <li className=\"nav-item\">\n          <Link to=\"/register\" className=\"nav-link\">\n            Register\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link to=\"/login\" className=\"nav-link\">\n            Login\n          </Link>\n        </li>\n      </ul>\n    );\n\n    return (\n      <nav className=\"navbar navbar-expand-sm navbar-dark bg-dark\">\n        <div className=\"container\">\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-toggle=\"collapse\"\n            data-target=\"#navbarTogglerDemo01\"\n            aria-controls=\"navbarTogglerDemo01\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span className=\"navbar-toggler-icon\" />\n          </button>\n          <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo01\">\n            <a className=\"navbar-brand\" href=\"#\">\n              Store App\n            </a>\n            <Link className=\"nav-link-to\" to=\"/\">\n              Home\n            </Link>\n          </div>\n          {access ? authLinks : guestLinks}\n          {/* {access ? null : <Redirect to=\"/\" />} */}\n        </div>\n      </nav>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  account: state.account,\n  cart: state.product.cart,\n});\n\nexport default connect(mapStateToProps, {\n  logout,\n  checkAuthenticated,\n  load_user,\n  fetchCart,\n})(Header);\n"]},"metadata":{},"sourceType":"module"}